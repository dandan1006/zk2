<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
	<link rel="stylesheet" href="css/index.css">
	
</head>
<body>
	<header class="mui-bar mui-bar-nav">
		<h1 class="mui-title">标题</h1>
	</header>
	<div class="mui-content">
		<!-- <div class="ulList">
			<li>
				我的爱豆
			</li>
			<li>
				所有爱豆
			</li>
			<li>
				饭圈大咖
			</li>
		</div> -->
		<div class="mui-scroll-wrapper>
		<div class="mui-scroll" id="pullrefresh"
			<div class="mui-content" style="background-color:#fff">
				<ul class="mui-table-view mui-grid-view list">
				</ul>    
			</div>
		</div>
	</div>
	</div>
		<script>
				var page=1,  
					pageSize=10, //一页多少条
					total;  //总条数
				mui.init({
					pullRefresh: {
						container: '#pullrefresh',
						up: {
							auto:true,
							contentrefresh: '正在加载...',
							callback: pullupRefresh
						}
					}
				});
				function pullupRefresh(){
						getUser();
				}
				
				mui('.mui-scroll-wrapper').scroll({
				deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006
				});
				
				
				function getUser(){
						mui.ajax('/users',{
						dataType:'json',
						type:'GET',
						data:{
							page:page,
							pageSize:pageSize,
						},
						success:function(res){
							renderProduct(res.data)
						}
					})
				}
			
				
				var imgUrl='http://localhost:3000/images/';
				function renderProduct(data){
					console.log(data)
					var str='';
					data.forEach(function(item){
						str+=`
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
									<a href="#">
								<img class="mui-media-object" src="${imgUrl}${item.img}">
								<div class="mui-media-body">${item.title}</div></a>
							
								</li>`
						
					})
					var list=document.querySelector('.list');
					list.innerHTML=str;
				}
		</script>
</body>
</html>